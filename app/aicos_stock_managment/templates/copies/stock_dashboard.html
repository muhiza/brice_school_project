{% import "bootstrap/utils.html" as utils %}
{% extends "stock_base.html" %}
{% block body %}
   <div class="container">
      <div class="row" style="padding-top: 20px; background-color: #f2f2f2; border: 1px solid silver;">
          <div class="col-md-3">
              <div class="card p-4 bg-success">
                <a href="#" style="color: white;">
                  <div class="card-body d-flex justify-content-between align-items-center">
                      <div>
                          <span class="h4 d-block font-weight-normal mb-2"><strong>00</strong></span>
                          <span class="font-weight-light"><h4><strong>Umusaruro</strong></h4></span>
                      </div>
                      <div class="h2 text-muted">
                          <i class=""></i>
                      </div>
                  </div>
                </a>
              </div>
          </div>

          <div class="col-md-3">
              <a href="#" style="color: white;">
                <div class="card p-4 bg-info">
                  <div class="card-body d-flex justify-content-between align-items-center">
                      <div>
                          <span class="h4 d-block font-weight-normal mb-2"><strong>00</strong></span>
                          <span class="font-weight-light"><h4><strong>Inyongeramusaruro</strong></h4></span>
                      </div>
                      <div class="h2 text-muted">
                          <i class=""></i>
                      </div>
                  </div>
              </div>
              </a>
          </div>

          <div class="col-md-3">
              <a href="#" style="color: white;">
                <div class="card p-4 bg-warning">
                    <div class="card-body d-flex justify-content-between align-items-center">
                        <div>
                            <span class="h4 d-block font-weight-normal mb-2"><strong>00</strong></span>
                            <span class="font-weight-light"><h4><strong>Ibyakoreshejwe</strong></h4></span>
                        </div>
                        <div class="h2 text-muted">
                            <i class=""></i>
                        </div>
                    </div>
                </div>
              </a>
          </div>

          <div class="col-md-3">
              <a href="#" style="color: white;">
                <div class="card p-4 bg-primary">
                    <div class="card-body d-flex justify-content-between align-items-center">
                        <div>
                            <span class="h4 d-block font-weight-normal mb-2"><strong>00</strong></span>
                            <span class="font-weight-light"><h4>Konte / banki</h4></span>
                        </div>
                        <div class="h2 text-muted">
                            <i class=""></i>
                        </div>
                    </div>
                </div>
              </a>
          </div>
      </div>
      <div class="row" style="margin-top: 10px; margin-bottom: 10px; padding-top: 20px; background-color: silver;">
        <div class="col-md-12">
          <h3 style="text-align: center"><strong>Raporo y'isarura ryose</strong></h3>
        </div>
      </div>
      <div class="row" style="margin-top: 20px;"> 
          <div class="col-md-12">
            <div class="table-responsive">
              <table id="totalexample" class="display" cellspacing="0" width="100%">
                    <thead>
                        <tr>
                            <th>Amazina</th>
                            <th>Umusaruro</th>
                            <th>Inyongeramusaruro</th>
                            <th>Imisanzu</th>
                            <th>Ibirarane</th>
                            <th>Ibihano</th>
                            <th>Ibindi</th>
                            <th>Amafarangwa Yose</th>
                        </tr>
                    </thead>
                    
                    <tfoot>
                        <tr>
                            <th>Amazina</th>
                            <th>Umusaruro</th>
                            <th>Inyongeramusaruro</th>
                            <th>Imisanzu</th>
                            <th>Ibirarane</th>
                            <th>Ibihano</th>
                            <th>Ibindi</th>
                            <th>Amafarangwa Yose</th>
                        </tr>
                    </tfoot>
                    <tbody>
                       {% if memberss %}
                          {% for member in memberss %}
                              <tr>
                                <td>{{ member.izina_ribanza }} {{ member.izina_rikurikira }}</td>
                                <td> 
                                  {% if member.umusarurob %}
                                      {% for umu in member.umusarurob %}
                                          {% if loop.last %}
                                              {{ umu.AmafarangaUmusaruro1 }}
                                          {% endif %}
                                      {% endfor %}
                                  {% endif %}
                                </td>
                                <td>
                                  {% if member.inyongeramusaruro %}
                                      {% for inyongera in member.inyongeramusaruro %}
                                          {% if loop.last %}
                                              {{ (inyongera.NPKkg * inyongera.NPKPerUnity) + (inyongera.DAP * inyongera.DAPPerUnity) + (inyongera.UREA * inyongera.UREAPerUnity) + (inyongera.KCL * inyongera.KCLPerUnity) + (inyongera.Briquette * inyongera.BriquettePerUnity) + (inyongera.Cypemetrine) + (inyongera.Beam) + (inyongera.ImbutoQuantity * inyongera.ImbutoAmount) + (inyongera.Redevance) }}
                                          {% endif %}
                                      {% endfor %}
                                  {% endif %}
                                </td>
                                <td>
                                  {% if member.imisanzu %}
                                      {% for imi in member.imisanzu %}
                                          {% if loop.last %}
                                              {{ (imi.UmusoroWakarere + imi.UmusanzuCoop + imi.Umugabane + imi.Ikigega + imi.KuzibaIcyuho) }}
                                          {% endif%}
                                      {% endfor %}
                                  {% endif %}
                                </td>
                                <td>
                                  {% if member.ibirarane %}
                                      {% for ibi in member.ibirarane %}
                                          {% if loop.last %}
                                              {{ (ibi.NPKkg * ibi.NPKPerUnity) + (ibi.DAP * ibi.DAPPerUnity) + (ibi.UREA * ibi.UREAPerUnity) + (ibi.KCL * ibi.KCLPerUnity) + (ibi.ImbutoQuantity * ibi.ImbutoAmount) + (ibi.IdeniAmount) + (ibi.Briquette * ibi.BriquettePerUnity) }}
                                          {% endif %}
                                      {% endfor %}
                                  {% endif%}
                                </td>
                                <td>
                                  {% if member.ibihano %}
                                      {% for ibi in member.ibihano %}
                                          {% if loop.last %}
                                              {{ ibi.AmandeC + ibi.AmandeApII }}
                                          {% endif %}
                                      {% endfor %}
                                  {% endif %}
                                </td>
                                <td>
                                  {% if member.ibindi %}
                                      {% for ibi in member.ibindi %}
                                          {% if loop.last %}
                                              {{ ibi.ImifukaAmount + ibi.MituelleAmount + ibi.UmuceriAmountGrade + ibi.Avence }}
                                          {% endif %}
                                      {% endfor %}
                                  {% endif %}
                                </td>
                                <td>
                                  {% if member.umusarurob and member.inyongeramusaruro and member.imisanzu and member.ibirarane and member.ibihano and member.ibindi %}
                                      {% for umu in member.umusarurob %}
                                          {% if loop.last %}
                                              {% for inyongera in member.inyongeramusaruro %}
                                                {% if loop.last %}
                                                    {% for imi in member.imisanzu %}
                                                        {% if loop.last %}
                                                            {% for ibir in member.ibirarane %}
                                                              {% if loop.last %}
                                                                  {% for ibih in member.ibihano %}
                                                                    {% if loop.last %}
                                                                        {% for ibin in member.ibindi %}
                                                                            {% if loop.last %}
                                                                                {{ umu.AmafarangaUmusaruro1 - ((inyongera.NPKkg * inyongera.NPKPerUnity) + (inyongera.DAP * inyongera.DAPPerUnity) + (inyongera.UREA * inyongera.UREAPerUnity) + (inyongera.KCL * inyongera.KCLPerUnity) + (inyongera.Briquette * inyongera.BriquettePerUnity) + (inyongera.Cypemetrine) + (inyongera.Beam) + (inyongera.ImbutoQuantity * inyongera.ImbutoAmount) + (inyongera.Redevance) + (imi.UmusoroWakarere + imi.UmusanzuCoop + imi.Umugabane + imi.Ikigega + imi.KuzibaIcyuho) + (ibir.NPKkg * ibir.NPKPerUnity) + (ibir.DAP * ibir.DAPPerUnity) + (ibir.UREA * ibir.UREAPerUnity) + (ibir.KCL * ibir.KCLPerUnity) + (ibir.ImbutoQuantity * ibir.ImbutoAmount) + (ibir.IdeniAmount)+ (ibir.Briquette * ibir.BriquettePerUnity) + (ibih.AmandeC + ibih.AmandeApII) + (ibin.ImifukaAmount + ibin.MituelleAmount + ibin.UmuceriAmountGrade + ibin.Avence)) }}
                                                                            {% endif %}
                                                                        {% endfor %}
                                                                    {% endif %}
                                                                {% endfor %}
                                                              {% endif %}
                                                          {% endfor %}
                                                        {% endif%}
                                                    {% endfor %}
                                                {% endif %}
                                          {% endfor %}
                                          {% endif %}
                                      {% endfor %}
                                  {% else %}
                                      0
                                  {% endif %}
                                </td>
                              </tr>
                          {% endfor %}
                       {% endif %}
                    </tbody>
                </table>
                <div id="charts"></div>
                <br><br>
            </div>
        </div>
      </div>
   </div> 
{% endblock %}



